/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import controller.BBQControl;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import model.AccompanimentToBBQ;
import model.GrillToBBQ;
import model.MeatToBBQ;
import model.SaladToBBQ;
import util.Listeners;

/**
 *
 * @author Annette
 */
public class BasketItemPanel extends javax.swing.JPanel {

    private MeatToBBQ meatToBBQ;
    private AccompanimentToBBQ accompanimentToBBQ;
    private GrillToBBQ grillToBBQ;
    private SaladToBBQ saladToBBQ;
    private BBQControl bbqc;
    private int transport;
    private int settings;
    private String salary;
    private Listeners listener;

    /**
     * Creates new form BasketItemPanel
     */
    public BasketItemPanel(Object category, int settings) {
        this.settings = settings;
        try {
            bbqc = BBQControl.getInstance();
        } catch (ClassNotFoundException | SQLException ex) {
            Logger.getLogger(BasketItemPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
        listener = Listeners.getList();
        initComponents();
        jTextField1.setVisible(false);
        switch (category.getClass().getSimpleName()) {
            case "MeatToBBQ":
                meatToBBQ = (MeatToBBQ) category;
                jLType.setText(meatToBBQ.getMeat().getType());
                jLKilo.setText(meatToBBQ.getKilo() + " Kilo");
                jLPrice.setText(meatToBBQ.getTotalPrice() + " DKK");
                setSize(263, 59);
                break;
            case "AccompanimentToBBQ":
                accompanimentToBBQ = (AccompanimentToBBQ) category;
                jLType.setText(accompanimentToBBQ.getAccompaniment().getType());
                jLPrice.setText(accompanimentToBBQ.getTotalPrice(settings) + " DKK");
                jLKilo.setText("");
                setSize(263, 59);
                break;
            case "GrillToBBQ":
                grillToBBQ = (GrillToBBQ) category;
                jLType.setText(grillToBBQ.getGrill().getType());
                jLPrice.setText(grillToBBQ.getGrill().getCoalPrice() + " DKK");
                jLKilo.setText("");
                setSize(263, 59);
                break;
            case "SaladToBBQ":
                saladToBBQ = (SaladToBBQ) category;
                jLType.setText(saladToBBQ.getSalad().getType());
                jLPrice.setText(saladToBBQ.getTotalPrice(settings) + " DKK");
                jLKilo.setText("");
                setSize(263, 59);
                break;
            case "Integer":
                transport = (Integer) category;
                jLType.setText("Transport");
                jLPrice.setText(transport + " DKK");
                jLKilo.setText("");
                jButton1.setVisible(false);
                setSize(263, 59);
                break;
            case "String":
                salary = (String) category;
                jLType.setText("LÃ¸n");
                jTextField1.setVisible(true);
                jLKilo.setText("");
                jLPrice.setVisible(false);
                jButton1.setVisible(false);
                jTextField1.setText(salary + " DDK");
                setSize(263, 59);
                break;
        }
        jButton1.setLocation((this.getWidth()-this.getHeight()), 0);
        jButton1.setSize(this.getHeight(), this.getHeight());
        this.repaint();
        this.revalidate();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTextField1 = new javax.swing.JTextField();
        jLType = new javax.swing.JLabel();
        jLKilo = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jLPrice = new javax.swing.JLabel();

        setBackground(new java.awt.Color(106, 140, 168));
        setBorder(javax.swing.BorderFactory.createEtchedBorder());
        setForeground(new java.awt.Color(255, 255, 255));
        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                formMouseClicked(evt);
            }
        });
        setLayout(null);

        jTextField1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jTextField1.setText("jTextField1");
        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        jTextField1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jTextField1FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextField1FocusLost(evt);
            }
        });
        jTextField1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField1KeyPressed(evt);
            }
        });
        add(jTextField1);
        jTextField1.setBounds(110, 30, 100, 20);

        jLType.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLType.setForeground(new java.awt.Color(255, 255, 255));
        jLType.setText("jLabel1");
        add(jLType);
        jLType.setBounds(0, 0, 210, 22);

        jLKilo.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLKilo.setForeground(new java.awt.Color(255, 255, 255));
        jLKilo.setText("jLabel2");
        add(jLKilo);
        jLKilo.setBounds(0, 30, 110, 22);

        jButton1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jButton1.setText("X");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        add(jButton1);
        jButton1.setBounds(210, 0, 50, 50);

        jLPrice.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLPrice.setForeground(new java.awt.Color(255, 255, 255));
        jLPrice.setText("jLabel3");
        add(jLPrice);
        jLPrice.setBounds(116, 30, 90, 22);
    }// </editor-fold>//GEN-END:initComponents

    private void formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseClicked
        if (saladToBBQ.getSalad().getType().equals("Salatbar")) {
            JFrame frame = new JFrame();
            SaladBarPanel saladBarPanel = new SaladBarPanel(frame, saladToBBQ.getSalad(), true);
            frame.add(saladBarPanel);
            frame.setSize(587, 335);
            frame.setVisible(true);
        }
    }//GEN-LAST:event_formMouseClicked

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        if (meatToBBQ != null) {
            bbqc.removeMeatFromList(meatToBBQ);
        } else if (accompanimentToBBQ != null) {
            bbqc.removeAccompanimentFromList(accompanimentToBBQ);
        } else if (grillToBBQ != null) {
            bbqc.removeGrillFromList(grillToBBQ);
        } else if (saladToBBQ != null) {
            bbqc.removeSaladFromList(saladToBBQ);
        }
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField1ActionPerformed

    private void jTextField1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField1FocusGained
        jTextField1.setText("");
    }//GEN-LAST:event_jTextField1FocusGained

    private void jTextField1FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField1FocusLost
        if (!jTextField1.getText().equals("")) {
            bbqc.getBuilder().setSalary(Integer.parseInt(jTextField1.getText()));
            jTextField1.setText(jTextField1.getText() + " DDK");
            listener.notifyListeners("added to basket");
        }else {
            jTextField1.setText("0 DDK");
        }

    }//GEN-LAST:event_jTextField1FocusLost

    private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField1KeyPressed

    }//GEN-LAST:event_jTextField1KeyPressed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLKilo;
    private javax.swing.JLabel jLPrice;
    private javax.swing.JLabel jLType;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
}
